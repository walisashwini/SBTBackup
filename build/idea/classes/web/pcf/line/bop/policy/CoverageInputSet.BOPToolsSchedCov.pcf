<?xml version="1.0"?>
<PCF
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:noNamespaceSchemaLocation="../../../../../../../pcf.xsd">
  <!-- The reason a specific input set is used for this coverage is that the
coverage requires a list view of the schedule items. -->
  <InputSet
    id="CoverageInputSet"
    mode="BOPToolsSchedCov">
    <Require
      name="coveragePattern"
      type="gw.api.productmodel.ClausePattern"/>
    <Require
      name="coverable"
      type="Coverable"/>
    <Require
      name="openForEdit"
      type="boolean"/>
    <Variable
      initialValue="coveragePattern"
      name="scheduledEquipmentPattern"
      type="gw.api.productmodel.ClausePattern"/>
    <Variable
      initialValue="coverable.PolicyLine as BOPLine"
      name="bopLine"
      type="productmodel.BOPLine"/>
    <HiddenInput
      id="CovPatternDisplayName"
      value="coveragePattern.DisplayName"
      valueType="java.lang.String"/>
    <InputGroup
      allowToggle="coveragePattern.allowToggle(coverable)"
      alwaysShowCheckbox="true"
      childrenVisible="coverable.getCoverageConditionOrExclusion(coveragePattern) != null"
      id="BOPSchedEquipInputGroup"
      label="scheduledEquipmentPattern.DisplayName"
      onToggle="bopLine.setCoverageConditionOrExclusionExists( scheduledEquipmentPattern, VALUE )">
      <ListViewInput
        boldLabel="true"
        editable="true"
        id="BOPSchedEquipLV"
        label="DisplayKey.get(&quot;Web.Policy.BOP.ScheduledEquipement&quot;)"
        labelAbove="true">
        <Toolbar>
          <IteratorButtons
            iterator="EquipmentLV"/>
        </Toolbar>
        <ListViewPanel
          id="EquipmentLV">
          <RowIterator
            editable="true"
            elementName="scheduledItem"
            hasCheckBoxes="true"
            numEntriesRequired="0"
            toCreateAndAdd="bopLine.createAndAddScheduledEquip()"
            toRemove="bopLine.removeScheduledEquip(scheduledItem); bopLine.maybeUnselectCoverage()"
            value="bopLine.BOPScheduledEquipments"
            valueType="entity.BOPScheduledEquipment[]">
            <Row>
              <TextCell
                align="left"
                id="WquipmentNumber"
                label="DisplayKey.get(&quot;Web.Policy.BOP.EquipmentNumber&quot;)"
                value="scheduledItem.EquipmentNumber"
                valueType="java.lang.Integer"/>
              <TextCell
                align="left"
                editable="true"
                id="SerialNumber"
                label="DisplayKey.get(&quot;Web.Policy.BOP.SerialNumber&quot;)"
                value="scheduledItem.SerialNumber"/>
              <TextCell
                align="left"
                editable="true"
                id="Description"
                label="DisplayKey.get(&quot;Web.Policy.BOP.Description&quot;)"
                required="true"
                value="scheduledItem.Description"/>
              <TextCell
                align="right"
                editable="true"
                id="EquipmentValue"
                label="DisplayKey.get(&quot;Web.Policy.BOP.InsuredValue&quot;)"
                required="true"
                value="scheduledItem.EquipmentValue"
                valueType="java.lang.Integer">
                <PostOnChange
                  deferUpdate="false"
                  onChange="bopLine.sumBOPToolsValue()"/>
              </TextCell>
            </Row>
          </RowIterator>
        </ListViewPanel>
      </ListViewInput>
      <TextInput
        boldLabel="true"
        boldValue="true"
        formatType="currency"
        id="SchedEquipLimit"
        inputConversion="gw.pcf.coverage.CovTermDirectInputSetHelper.convertFromString(VALUE)"
        label="bopLine.BOPToolsSchedCov.BOPToolsSchedLimTerm.DisplayName"
        outputConversion="gw.pcf.coverage.CovTermDirectInputSetHelper.convertToString(VALUE)"
        validationExpression="gw.pcf.coverage.CovTermDirectInputSetHelper.validate(bopLine.BOPToolsSchedCov.BOPToolsSchedLimTerm)"
        value="bopLine.BOPToolsSchedCov.BOPToolsSchedLimTerm.Value"
        valueType="java.math.BigDecimal"
        visible="bopLine.BOPToolsSchedCov.hasCovTerm(&quot;BOPToolsSchedLim&quot;)"/>
    </InputGroup>
    <InputDivider
      visible="openForEdit or coverable.getCoverageConditionOrExclusion(coveragePattern) != null"/>
  </InputSet>
</PCF>
<?xml version="1.0"?>
<PCF
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:noNamespaceSchemaLocation="../../../../../../../../pcf.xsd">
  <DetailViewPanel
    editable="openForEdit"
    id="IMARItemDV">
    <Require
      name="accountsRecPart"
      type="IMAccountsRecPart"/>
    <Require
      name="openForEdit"
      type="boolean"/>
    <Require
      name="jobWizardHelper"
      type="gw.api.web.job.JobWizardHelper"/>
    <Variable
      initialValue="accountsRecPart.getAvailableBuildings().sortBy(\ imb -&gt; imb.Building.PolicyLocation.LocationNum * 100 + imb.Building.BuildingNum)"
      name="availableBuildings"
      type="entity.IMBuilding[]"/>
    <InputColumn>
      <ListViewInput
        labelAbove="true">
        <Toolbar
          visible="openForEdit">
          <IteratorButtons
            iterator="ARreceivablesiterator"/>
        </Toolbar>
        <ListViewPanel>
          <RowIterator
            editable="true"
            elementName="theAR"
            hasCheckBoxes="true"
            hideCheckBoxesIfReadOnly="true"
            id="ARreceivablesiterator"
            numEntriesRequired="0"
            toCreateAndAdd="accountsRecPart.createAndAddARAndCoverage()"
            toRemove="accountsRecPart.removeIMAccountsRecAndCoverage( theAR )"
            value="accountsRecPart.IMAccountsReceivables"
            valueType="entity.IMAccountsReceivable[]">
            <IteratorSort
              sortBy="theAR.AccountsRecNumber"
              sortOrder="1"/>
            <Row>
              <TextCell
                align="left"
                id="ARnumcell"
                label="DisplayKey.get(&quot;Web.Policy.IM.AccountsReceivable.ARNum&quot;)"
                value="theAR.AccountsRecNumber"
                valueType="java.lang.Integer"/>
              <RangeCell
                align="left"
                editable="true"
                id="buildingcell"
                label="DisplayKey.get(&quot;Web.Policy.IM.AccountsReceivable.LocationBuilding&quot;)"
                maxWidth="800px"
                optionLabel="getLocationBuildingDisplayName(VALUE)"
                required="true"
                sortValueRange="false"
                value="theAR.IMBuilding"
                valueRange="availableBuildings"
                valueType="entity.IMBuilding"/>
              <TypeKeyCell
                align="left"
                editable="true"
                id="containercell"
                label="DisplayKey.get(&quot;Web.Policy.IM.AccountsReceivable.Receptacle&quot;)"
                required="true"
                value="theAR.ReceptacleType"
                valueType="typekey.ReceptacleType"/>
              <CheckBoxCell
                editable="true"
                enableSort="false"
                id="forwarededCell"
                label="DisplayKey.get(&quot;Web.Policy.IM.AccountsReceivable.ForwardedToHomeOffice&quot;)"
                value="theAR.ForwardToHomeOffice"
                wrapLabel="true"/>
              <TypeKeyCell
                editable="true"
                enableSort="false"
                id="duplicatedCell"
                label="DisplayKey.get(&quot;Web.Policy.IM.AccountsReceivable.PercentDuplicated&quot;)"
                required="true"
                value="theAR.PercentDuplicated"
                valueType="typekey.PercentDuplicated"
                wrapLabel="true"/>
              <TextCell
                editable="true"
                format="&quot;###,###,000&quot;"
                id="ARLlimitCell"
                label="DisplayKey.get(&quot;Web.Policy.IM.AccountsReceivable.Limit&quot;)"
                required="true"
                value="theAR.IMAccountReceivableCov.IMAccountsReceivableLimitTerm.Value"
                valueType="java.math.BigDecimal"/>
              <RangeCell
                editable="true"
                id="ARCurrency"
                label="DisplayKey.get(&quot;Web.Policy.CoverableCurrency&quot;)"
                required="true"
                value="theAR.PreferredCoverageCurrency"
                valueRange="gw.web.policy.CoverableCoverageCurrencySynchronizer.getAvailableCurrencies(theAR)"
                valueType="typekey.Currency"
                visible="gw.api.util.CurrencyUtil.isMultiCurrencyMode()">
                <PostOnChange
                  onChange="gw.web.policy.CoverableCoverageCurrencySynchronizer.synchronizeCurrencies(theAR, jobWizardHelper)"/>
              </RangeCell>
            </Row>
          </RowIterator>
        </ListViewPanel>
      </ListViewInput>
    </InputColumn>
    <Code><![CDATA[function getLocationBuildingDisplayName(b : IMBuilding) : String {
  return b.IMLocation.DisplayName + " / " + b.DisplayName
}]]></Code>
  </DetailViewPanel>
</PCF>